---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.1'
      jupytext_version: 1.1.6
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

# Profiling and Timing Code

```python
%timeit sum(range(100))
```

```python
%%timeit
total = 0
for i in range(1000):
    for j in range(1000):
        total += i * (-1) ** j
```

```python
import random
L = [random.random() for i in range(100000)]
%timeit L.sort()
```

```python
import random
L = [random.random() for i in range(100000)]
print("sorting an unsorted list:")
%time L.sort()
```

```python
print("sorting an already sorted list:")
%time L.sort()
```

```python
%%time
total = 0
for i in range(1000):
    for j in range(1000):
        total += i * (-1) ** j
```

```python
def sum_of_lists(N):
    total = 0
    for i in range(5):
        L = [j ^ (j >> i) for j in range(N)]
        total += sum(L)
    return total
```

```python
%prun sum_of_lists(1000000)
```

```python
%load_ext line_profiler
```

```python
%lprun -f sum_of_lists sum_of_lists(5000)
```

```python
%load_ext memory_profiler
```

```python
%memit sum_of_lists(1000000)
```

```python
%%file mprun_demo.py
def sum_of_lists(N):
    total = 0
    for i in range(5):
        L = [j ^ (j >> i) for j in range(N)]
        total += sum(L)
        del L # remove reference to L
    return total
```

```python
from mprun_demo import sum_of_lists
%mprun -f sum_of_lists sum_of_lists(1000000)
```
