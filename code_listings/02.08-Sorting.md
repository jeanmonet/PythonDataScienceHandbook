---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.1'
      jupytext_version: 1.1.6
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

# Sorting Arrays

```python
import numpy as np

def selection_sort(x):
    for i in range(len(x)):
        swap = i + np.argmin(x[i:])
        (x[i], x[swap]) = (x[swap], x[i])
    return x
```

```python
x = np.array([2, 1, 4, 3, 5])
selection_sort(x)
```

```python
def bogosort(x):
    while np.any(x[:-1] > x[1:]):
        np.random.shuffle(x)
    return x
```

```python
x = np.array([2, 1, 4, 3, 5])
bogosort(x)
```

```python
x = np.array([2, 1, 4, 3, 5])
np.sort(x)
```

```python
x.sort()
print(x)
```

```python
x = np.array([2, 1, 4, 3, 5])
i = np.argsort(x)
print(i)
```

```python
x[i]
```

```python
rand = np.random.RandomState(42)
X = rand.randint(0, 10, (4, 6))
print(X)
```

```python
# sort each column of X
np.sort(X, axis=0)
```

```python
# sort each row of X
np.sort(X, axis=1)
```

```python
x = np.array([7, 2, 3, 1, 6, 5, 4])
np.partition(x, 3)
```

```python
np.partition(X, 2, axis=1)
```

```python
X = rand.rand(10, 2)
```

```python
%matplotlib inline
import matplotlib.pyplot as plt
import seaborn; seaborn.set() # Plot styling
plt.scatter(X[:, 0], X[:, 1], s=100);
```

```python
dist_sq = np.sum((X[:, np.newaxis, :] - X[np.newaxis, :, :]) ** 2, axis=-1)
```

```python
# for each pair of points, compute differences in their coordinates
differences = X[:, np.newaxis, :] - X[np.newaxis, :, :]
differences.shape
```

```python
# square the coordinate differences
sq_differences = differences ** 2
sq_differences.shape
```

```python
# sum the coordinate differences to get the squared distance
dist_sq = sq_differences.sum(-1)
dist_sq.shape
```

```python
dist_sq.diagonal()
```

```python
nearest = np.argsort(dist_sq, axis=1)
print(nearest)
```

```python
K = 2
nearest_partition = np.argpartition(dist_sq, K + 1, axis=1)
```

```python
plt.scatter(X[:, 0], X[:, 1], s=100)

# draw lines from each point to its 2 nearest neighbors
K = 2

for i in range(X.shape[0]):
    for j in nearest_partition[i, :K+1]:
        # plot a line from X[i] to X[j]
        # use some zip magic to make it happen:
        plt.plot(*zip(X[j], X[i]), color='black')
```
